function cuSel(a){function b(){jQuery("html").unbind("click"),jQuery("html").click(function(a){var b=jQuery(a.target),d=(b.attr("id"),b.prop("class"));if(d.indexOf("cuselText")==-1&&d.indexOf("cuselFrameRight")==-1||b.parent().prop("class").indexOf("classDisCusel")!=-1)if(d.indexOf("cusel")!=-1&&d.indexOf("classDisCusel")==-1&&b.is("div")){var e=b.find(".cusel-scroll-wrap").eq(0);cuselShowList(e)}else if(b.is(".cusel-scroll-wrap span")&&d.indexOf("cuselActive")==-1){var f;f=void 0==b.attr("val")?b.text():b.attr("val"),b.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(f).end().prev().text(b.text()).end().css("display","none").parent(".cusel").removeClass("cuselOpen"),b.addClass("cuselActive"),b.parents(".cusel-scroll-wrap").find(".cuselOptHover").removeClass("cuselOptHover"),d.indexOf("cuselActive")==-1&&b.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}else{if(b.parents(".cusel-scroll-wrap").is("div"))return;jQuery(".cusel-scroll-wrap").css("display","none").parent(".cusel").removeClass("cuselOpen")}else{var e=b.parent().find(".cusel-scroll-wrap").eq(0);cuselShowList(e)}}),jQuery(".cusel").unbind("keydown"),jQuery(".cusel").keydown(function(a){var b;if(window.event?b=window.event.keyCode:a&&(b=a.which),null==b||0==b||9==b)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;if(40==b){var d=jQuery(this).find(".cuselOptHover").eq(0);if(d.is("span"))var e=d;else var e=jQuery(this).find(".cuselActive").eq(0);var f=e.next();return!!f.is("span")&&(jQuery(this).find(".cuselText").eq(0).text(f.text()),e.removeClass("cuselOptHover"),f.addClass("cuselOptHover"),$(this).find("input").eq(0).val(f.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(38==b){var d=$(this).find(".cuselOptHover").eq(0);if(d.is("span"))var e=d;else var e=$(this).find(".cuselActive").eq(0);return cuselActivePrev=e.prev(),!!cuselActivePrev.is("span")&&($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),e.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(27==b){var g=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(g)}if(13==b){var h=$(this).find(".cuselOptHover").eq(0);if(h.is("span"))$(this).find(".cuselActive").removeClass("cuselActive"),h.addClass("cuselActive");else{$(this).find(".cuselActive").attr("val")}$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}if(32==b&&$.browser.opera){var j=$(this).find(".cusel-scroll-wrap").eq(0);cuselShowList(j)}return!$.browser.opera&&void 0});var a=[];jQuery(".cusel").keypress(function(b){function g(){var b=[];for(var c in a)window.event?b[c]=a[c].keyCode:a[c]&&(b[c]=a[c].which),b[c]=String.fromCharCode(b[c]).toUpperCase();var g,h,d=jQuery(e).find("span"),f=d.length;for(g=0;g<f;g++){var i=!0;for(var j in a)h=d.eq(g).text().charAt(j).toUpperCase(),h!=b[j]&&(i=!1);if(i){jQuery(e).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(g).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(d.eq(g).text()),cuselScrollToCurent($(e).find(".cusel-scroll-wrap").eq(0)),a=a.splice,a=[];break}}a=a.splice,a=[]}var c;if(window.event?c=window.event.keyCode:b&&(c=b.which),null==c||0==c||9==c)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;var e=this;a.push(b),clearTimeout(jQuery.data(this,"timer"));var f=setTimeout(function(){g()},500);return jQuery(this).data("timer",f),(!jQuery.browser.opera||9==window.event.keyCode)&&void 0})}jQuery(a.changedEl).each(function(c){var d=jQuery(this),e=d.outerWidth(),f=d.prop("class"),g=d.prop("id"),h=d.prop("name"),j=d.val(),k=d.find("option[value='"+j+"']").eq(0),l=k.text(),m=d.prop("disabled"),n=a.scrollArrows,o=d.prop("onchange"),p=d.prop("tabindex"),q=d.prop("multiple");if(!g||q)return!1;m?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),n&&(classDisCusel+=" cuselScrollArrows"),k.addClass("cuselActive");var r=d.html(),s=r.replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser.msie&&parseInt($.browser.version)<9){var t=/(val=)(.*?)(>)/g;s=s.replace(t,"$1'$2'$3")}var u='<div class="cusel '+f+" "+classDisCusel+'" id=cuselFrame-'+g+' style="width:'+e+'px" tabindex="'+p+'"><div class="cuselFrameRight"></div><div class="cuselText">'+l+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+g+'">'+s+'</div></div><input type="hidden" id="'+g+'" name="'+h+'" value="'+j+'" /></div>';d.replaceWith(u),o&&jQuery("#"+g).bind("change",o);var x,v=jQuery("#cuselFrame-"+g),w=v.find("span");w.eq(0).text()?x=w.eq(0).innerHeight():(x=w.eq(1).innerHeight(),w.eq(0).css("height",w.eq(1).height())),w.length>a.visRows?v.find(".cusel-scroll-wrap").eq(0).css({height:x*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",x*a.visRows+"px"):v.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var y=jQuery("#cusel-scroll-"+g).find("span[addTags]"),z=y.length;for(i=0;i<z;i++)y.eq(i).append(y.eq(i).attr("addTags")).removeAttr("addTags");b()}),jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")}),jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")}),jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")})}function cuSelRefresh(a){var d,b=a.refreshEl.split(","),c=b.length;for(d=0;d<c;d++){var e=jQuery(b[d]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);e.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),e.css({visibility:"hidden",display:"block"});var f=e.find("span"),g=f.eq(0).outerHeight();f.length>a.visRows?e.css({height:g*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",g*a.visRows+"px"):e.css({display:"none",visibility:"visible"})}}function cuselShowList(a){var b=a.parent(".cusel");if("none"==a.css("display")){$(".cusel-scroll-wrap").css("display","none"),b.addClass("cuselOpen"),a.css("display","block");var c=!1;b.prop("class").indexOf("cuselScrollArrows")!=-1&&(c=!0),a.find(".jScrollPaneContainer").eq(0).is("div")||a.find("div").eq(0).jScrollPaneCusel({showArrows:c}),cuselScrollToCurent(a)}else a.css("display","none"),b.removeClass("cuselOpen")}function cuselScrollToCurent(a){var b=null;if(a.find(".cuselOptHover").eq(0).is("span")?b=a.find(".cuselOptHover").eq(0):a.find(".cuselActive").eq(0).is("span")&&(b=a.find(".cuselActive").eq(0)),a.find(".jScrollPaneTrack").eq(0).is("div")&&b){var c=b.position(),d=a.find(".cusel-scroll-pane").eq(0).attr("id");jQuery(function(){jQuery(".filter-button").click(function(){jQuery(this).hasClass("active")?(jQuery(this).removeClass("active"),jQuery(".filter-block").removeClass("active")):(jQuery(this).addClass("active"),jQuery(".filter-block").addClass("active"))})});